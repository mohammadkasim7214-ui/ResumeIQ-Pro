<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ResumeIQ Pro | AI-Powered Resume Intelligence</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Poppins:wght@300;400;500;600;700&family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #60a5fa;
            --primary-dark: #1e40af;
            --primary-light: #93c5fd;
            --accent: #fbbf24;
            --accent-dark: #d97706;
            --accent-light: #fde68a;
            --success: #34d399;
            --warning: #fb923c;
            --danger: #ef4444;
            --dark: #f3f4f6;
            --darker: #111827;
            --light: #1f2937;
            --gray: #9ca3af;
            --gray-light: #4b5563;
            --white: #f3f4f6;
            --card-bg: #1f2937;
            --sidebar-bg: #111827;
            --text-primary: #f3f4f6;
            --text-secondary: #9ca3af;
            --border-color: #374151;
            --gradient-primary: linear-gradient(135deg, #3b82f6 0%, #1e40af 100%);
            --gradient-accent: linear-gradient(135deg, #fbbf24 0%, #d97706 100%);
            --gradient-dark: linear-gradient(135deg, #111827 0%, #1f2937 100%);
            --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.06);
            --shadow-md: 0 8px 30px rgba(0, 0, 0, 0.12);
            --shadow-lg: 0 20px 60px rgba(0, 0, 0, 0.15);
            --border-radius: 16px;
            --border-radius-sm: 8px;
        }

        body {
            font-family: 'Outfit', 'Inter', sans-serif;
            background: var(--darker);
            color: var(--text-primary);
            min-height: 100vh;
            line-height: 1.6;
            overflow-x: hidden;
        }

        .app-container {
            display: flex;
            min-height: 100vh;
            width: 100vw;
            overflow: hidden;
        }

        /* Sidebar Navigation */
        .sidebar {
            width: 280px;
            min-width: 280px;
            max-width: 280px;
            background: var(--sidebar-bg);
            color: var(--white);
            padding: 30px 0;
            display: flex;
            flex-direction: column;
            box-shadow: var(--shadow-lg);
            z-index: 100;
            height: 100vh;
            position: fixed;
            left: 0;
            top: 0;
        }

        .logo {
            display: flex;
            align-items: center;
            padding: 0 30px 30px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 30px;
        }

        .logo-icon {
            width: 44px;
            height: 44px;
            background: var(--gradient-accent);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 12px;
            font-size: 1.4rem;
        }

        .logo-text {
            font-size: 1.5rem;
            font-weight: 700;
            font-family: 'Poppins', sans-serif;
        }

        .logo-subtitle {
            font-size: 0.75rem;
            opacity: 0.7;
            margin-top: 2px;
            font-family: 'Outfit', sans-serif;
        }

        .nav-menu {
            flex: 1;
        }

        .nav-item {
            display: flex;
            align-items: center;
            padding: 16px 30px;
            color: rgba(255, 255, 255, 0.7);
            text-decoration: none;
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
            cursor: pointer;
            font-family: 'Outfit', sans-serif;
            font-weight: 500;
        }

        .nav-item:hover {
            background: rgba(255, 255, 255, 0.05);
            color: var(--white);
        }

        .nav-item.active {
            background: rgba(255, 255, 255, 0.08);
            color: var(--white);
            border-left-color: var(--accent);
        }

        .nav-icon {
            width: 24px;
            margin-right: 16px;
            font-size: 1.2rem;
            text-align: center;
        }

        .nav-text {
            font-weight: 500;
        }

        .user-profile {
            padding: 20px 30px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
        }

        .user-avatar {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            background: var(--gradient-primary);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 12px;
            font-weight: 600;
        }

        .user-info h4 {
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 4px;
            font-family: 'Outfit', sans-serif;
        }

        .user-info p {
            font-size: 0.75rem;
            opacity: 0.7;
            font-family: 'Outfit', sans-serif;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            display: flex;
            margin-left: 280px;
            margin-right: 380px;
            height: 100vh;
            overflow-y: auto;
            position: relative;
            padding: 0 20px;
        }

        /* Analytics Tabs Styling */
        .analytics-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            padding: 0 5px;
        }

        .analytics-tab {
            flex: 1;
            padding: 12px 16px;
            background: var(--darker);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius-sm);
            color: var(--text-secondary);
            font-family: 'Outfit', sans-serif;
            font-weight: 500;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .analytics-tab:hover {
            background: var(--card-bg);
            color: var(--text-primary);
            transform: translateY(-1px);
        }

        .analytics-tab.active {
            background: var(--primary-dark);
            color: var(--white);
            border-color: var(--primary);
        }

        .analytics-content {
            display: none;
            padding: 20px 5px;
        }

        .analytics-content.active {
            display: block;
        }

        .analytics-placeholder {
            text-align: center;
            padding: 40px 20px;
            background: var(--darker);
            border-radius: var(--border-radius);
            border: 1px solid var(--border-color);
        }

        .analytics-icon {
            font-size: 2rem;
            color: var(--primary);
            margin-bottom: 15px;
            opacity: 0.7;
        }

        .analytics-placeholder p {
            color: var(--text-secondary);
            font-size: 0.95rem;
            line-height: 1.5;
        }

        /* Dashboard Layout */
        .dashboard-container {
            flex: 1;
            padding: 30px;
            overflow-y: auto;
            height: 100vh;
        }

        /* HR Analytics Sidebar */
        .hr-analytics-sidebar {
            width: 380px;
            min-width: 380px;
            max-width: 380px;
            background: var(--card-bg);
            border-left: 1px solid rgba(255, 255, 255, 0.1);
            padding: 25px;
            overflow-y: auto;
            box-shadow: var(--shadow-lg);
            height: 100vh;
            position: fixed;
            right: 0;
            top: 0;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2rem;
            font-weight: 700;
            color: var(--white);
            margin-bottom: 8px;
            font-family: 'Poppins', sans-serif;
        }

        .header p {
            color: var(--gray-light);
            font-size: 1rem;
            font-family: 'Outfit', sans-serif;
        }

        .header-actions {
            display: flex;
            gap: 16px;
        }

        .btn {
            padding: 12px 20px;
            border-radius: var(--border-radius-sm);
            font-weight: 600;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            font-family: 'Outfit', sans-serif;
            font-size: 0.9rem;
        }

        .btn-primary {
            background: var(--gradient-primary);
            color: var(--white);
            box-shadow: var(--shadow-md);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .btn-outline {
            background: transparent;
            color: var(--white);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .btn-outline:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        /* Dashboard Grid */
        .dashboard {
            display: grid;
            grid-template-columns: 1fr;
            gap: 25px;
            margin-bottom: 30px;
        }

        .card {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-lg);
            overflow: hidden;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .card-header {
            padding: 20px 25px 0;
            margin-bottom: 15px;
        }

        .card-title {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 12px;
            font-family: 'Poppins', sans-serif;
        }

        .card-title i {
            color: var(--primary);
        }

        .card-body {
            padding: 0 25px 25px;
        }

        /* Upload Section */
        .upload-area {
            border: 2px dashed var(--border-color);
            border-radius: var(--border-radius);
            padding: 40px 25px;
            text-align: center;
            margin-bottom: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: var(--card-bg);
            position: relative;
            overflow: hidden;
        }

        .upload-area::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--gradient-primary);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .upload-area:hover {
            border-color: var(--primary);
            transform: translateY(-3px);
            box-shadow: var(--shadow-md);
        }

        .upload-area:hover::before {
            opacity: 0.03;
        }

        .upload-icon {
            font-size: 3rem;
            color: var(--primary);
            margin-bottom: 15px;
            opacity: 0.8;
        }

        .upload-area h3 {
            font-size: 1.2rem;
            margin-bottom: 10px;
            color: var(--text-primary);
            font-family: 'Poppins', sans-serif;
        }

        .upload-area p {
            color: var(--text-secondary);
            font-size: 0.9rem;
            font-family: 'Outfit', sans-serif;
        }

        textarea {
            width: 100%;
            height: 220px;
            padding: 18px;
            border: 1px solid var(--gray-light);
            border-radius: var(--border-radius);
            font-size: 14px;
            resize: vertical;
            transition: all 0.3s ease;
            background: var(--card-bg);
            color: var(--text-primary);
            font-family: 'Outfit', sans-serif;
            line-height: 1.6;
        }

        textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(42, 75, 124, 0.1);
        }

        .analyze-btn {
            background: var(--gradient-primary);
            color: var(--white);
            border: none;
            padding: 16px 25px;
            font-size: 1rem;
            font-weight: 600;
            border-radius: var(--border-radius);
            cursor: pointer;
            width: 100%;
            margin-top: 15px;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-md);
            position: relative;
            overflow: hidden;
            font-family: 'Outfit', sans-serif;
        }

        .analyze-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .analyze-btn:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-lg);
        }

        .analyze-btn:hover::before {
            left: 100%;
        }

        /* Results Section */
        .results-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
        }

        .score-card {
            background: var(--gradient-primary);
            color: var(--white);
            border-radius: var(--border-radius);
            padding: 25px;
            text-align: center;
            box-shadow: var(--shadow-lg);
            position: relative;
            overflow: hidden;
        }

        .score-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="none"><path d="M0,0 L100,0 L100,100 Z" fill="rgba(255,255,255,0.05)"/></svg>');
            background-size: cover;
        }

        .ats-score {
            font-size: 4rem;
            font-weight: 800;
            margin: 15px 0;
            position: relative;
            font-family: 'Poppins', sans-serif;
        }

        .score-excellent { color: #27AE60; }
        .score-good { color: #E67E22; }
        .score-poor { color: #E74C3C; }

        .progress-ring {
            width: 160px;
            height: 160px;
            margin: 0 auto 15px;
            position: relative;
        }

        .progress-bg {
            fill: none;
            stroke: rgba(255, 255, 255, 0.2);
            stroke-width: 8;
        }

        .progress-fill {
            fill: none;
            stroke: var(--accent);
            stroke-width: 8;
            stroke-linecap: round;
            transform: rotate(-90deg);
            transform-origin: 50% 50%;
            transition: stroke-dashoffset 1s ease;
        }

        .progress-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
        }

        .progress-value {
            font-size: 2.2rem;
            font-weight: 800;
            display: block;
            font-family: 'Poppins', sans-serif;
        }

        .progress-label {
            font-size: 0.85rem;
            opacity: 0.8;
            font-family: 'Outfit', sans-serif;
        }

        .metric-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .metric-card {
            background: var(--white);
            padding: 18px;
            border-radius: var(--border-radius);
            text-align: center;
            box-shadow: var(--shadow-sm);
            transition: all 0.3s ease;
            border: 1px solid var(--gray-light);
        }

        .metric-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-md);
        }

        .metric-value {
            font-size: 1.8rem;
            font-weight: 800;
            margin: 8px 0;
            color: var(--primary);
            font-family: 'Poppins', sans-serif;
        }

        .insight-card {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: var(--shadow-sm);
            border-left: 4px solid var(--primary);
            transition: all 0.3s ease;
            font-family: 'Outfit', sans-serif;
            color: var(--text-primary);
        }

        .insight-card:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-md);
            background: var(--light);
        }

        .key-points {
            border-left-color: var(--success);
            background: rgba(52, 211, 153, 0.1);
        }

        .warning {
            border-left-color: var(--warning);
            background: rgba(251, 146, 60, 0.1);
        }

        .critical {
            border-left-color: var(--danger);
            background: rgba(239, 68, 68, 0.1);
        }

        .loading {
            display: none;
            text-align: center;
            padding: 40px 25px;
            background: var(--card-bg);
            color: var(--text-primary);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-md);
            border: 1px solid var(--border-color);
        }

        .spinner {
            border: 4px solid var(--border-color);
            border-top: 4px solid var(--primary);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .recruiter-checklist {
            background: var(--gradient-dark);
            color: var(--white);
            border-radius: var(--border-radius);
            padding: 20px;
            margin: 20px 0;
            box-shadow: var(--shadow-lg);
        }

        .checklist-item {
            display: flex;
            align-items: center;
            margin: 12px 0;
            padding: 14px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--border-radius-sm);
            transition: all 0.3s ease;
            font-family: 'Outfit', sans-serif;
        }

        .checklist-item:hover {
            background: rgba(255, 255, 255, 0.08);
            transform: translateX(5px);
        }

        .checklist-item.checked {
            background: rgba(39, 174, 96, 0.15);
        }

        .check-icon {
            margin-right: 14px;
            font-size: 1.2rem;
            width: 22px;
            text-align: center;
        }

        /* HR Analytics Styles */
        .analytics-tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 2px solid var(--gray-light);
            background: var(--white);
            border-radius: var(--border-radius) var(--border-radius) 0 0;
            padding: 0 8px;
        }

        .analytics-tab {
            padding: 14px 20px;
            background: none;
            border: none;
            cursor: pointer;
            font-weight: 600;
            color: var(--gray);
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
            position: relative;
            font-family: 'Outfit', sans-serif;
            font-size: 0.9rem;
        }

        .analytics-tab.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }

        .analytics-content {
            display: none;
        }

        .analytics-content.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .chart-container {
            height: 180px;
            margin: 20px 0;
        }

        .compliance-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
            margin: 20px 0;
        }

        .compliance-item {
            padding: 14px;
            border-radius: var(--border-radius);
            background: var(--white);
            box-shadow: var(--shadow-sm);
            transition: all 0.3s ease;
            font-family: 'Outfit', sans-serif;
        }

        .compliance-item:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-md);
        }

        .compliance-pass {
            border-left: 4px solid var(--success);
            background: linear-gradient(135deg, #f0fdf4 0%, #ecfdf5 100%);
        }

        .compliance-warning {
            border-left: 4px solid var(--warning);
            background: linear-gradient(135deg, #fffbeb 0%, #fef3c7 100%);
        }

        .compliance-fail {
            border-left: 4px solid var(--danger);
            background: linear-gradient(135deg, #fef2f2 0%, #fecaca 100%);
        }

        .skills-matrix {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
            margin: 20px 0;
        }

        .skill-category {
            padding: 14px;
            background: var(--white);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-sm);
            transition: all 0.3s ease;
            font-family: 'Outfit', sans-serif;
        }

        .skill-category:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-md);
        }

        .skill-item {
            display: flex;
            justify-content: space-between;
            margin: 10px 0;
            padding: 8px 0;
            border-bottom: 1px solid var(--gray-light);
            font-family: 'Outfit', sans-serif;
        }

        /* Page Sections */
        .page-section {
            display: none;
        }

        .page-section.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        /* Analytics Dashboard */
        .analytics-dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }

        .analytics-card {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: var(--shadow-md);
            border-left: 4px solid var(--accent);
            font-family: 'Outfit', sans-serif;
        }

        .analytics-card h3 {
            font-size: 1.1rem;
            margin-bottom: 12px;
            color: var(--dark);
            font-family: 'Poppins', sans-serif;
        }

        /* Skill Gap Analysis Styles */
        .skill-gap-container {
            margin-top: 30px;
        }

        .skill-category-card {
            background: var(--white);
            border-radius: var(--border-radius);
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: var(--shadow-sm);
            border-left: 4px solid var(--primary);
            transition: all 0.3s ease;
        }

        .skill-category-card:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-md);
        }

        .skill-category-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .skill-category-title {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--dark);
            font-family: 'Poppins', sans-serif;
        }

        .skill-progress-bar {
            height: 8px;
            background: var(--gray-light);
            border-radius: 4px;
            margin: 10px 0;
            overflow: hidden;
        }

        .skill-progress-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 0.5s ease;
        }

        .skill-progress-excellent { background: var(--success); }
        .skill-progress-good { background: var(--warning); }
        .skill-progress-poor { background: var(--danger); }

        .skill-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 15px;
        }

        .current-skills, .missing-skills {
            padding: 15px;
            border-radius: var(--border-radius-sm);
        }

        .current-skills {
            background: rgba(39, 174, 96, 0.08);
            border-left: 3px solid var(--success);
        }

        .missing-skills {
            background: rgba(231, 76, 60, 0.08);
            border-left: 3px solid var(--danger);
        }

        .skill-list {
            list-style-type: none;
            margin-top: 10px;
        }

        .skill-list li {
            padding: 8px 0;
            border-bottom: 1px solid rgba(0,0,0,0.05);
            display: flex;
            align-items: center;
        }

        .skill-list li:last-child {
            border-bottom: none;
        }

        .skill-list li i {
            margin-right: 8px;
        }

        .current-skills .skill-list li i {
            color: var(--success);
        }

        .missing-skills .skill-list li i {
            color: var(--danger);
        }

        .recommendations-card {
            background: var(--white);
            border-radius: var(--border-radius);
            padding: 20px;
            margin-top: 20px;
            box-shadow: var(--shadow-sm);
            border-left: 4px solid var(--accent);
        }

        .recommendation-item {
            display: flex;
            align-items: flex-start;
            margin: 12px 0;
            padding: 12px;
            background: rgba(212, 175, 55, 0.08);
            border-radius: var(--border-radius-sm);
        }

        .recommendation-item i {
            color: var(--accent);
            margin-right: 12px;
            margin-top: 2px;
        }

        /* Settings */
        .settings-grid {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 25px;
        }

        .settings-menu {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: var(--shadow-md);
        }

        .settings-content {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 25px;
            box-shadow: var(--shadow-md);
        }

        /* Responsive Design */
        @media (max-width: 1200px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
            
            .sidebar {
                width: 240px;
            }
            
            .hr-analytics-sidebar {
                width: 340px;
            }
        }

        @media (max-width: 992px) {
            .main-content {
                flex-direction: column;
            }
            
            .hr-analytics-sidebar {
                width: 100%;
                border-left: none;
                border-top: 1px solid rgba(255, 255, 255, 0.1);
            }
            
            .skill-details {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .app-container {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                padding: 20px;
            }
            
            .dashboard-container {
                padding: 20px;
            }
            
            .header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
            
            .metric-grid {
                grid-template-columns: 1fr;
            }
            
            .settings-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Sidebar Navigation -->
        <div class="sidebar">
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-brain"></i>
                </div>
                <div>
                    <div class="logo-text">ResumeIQ Pro</div>
                    <div class="logo-subtitle">AI Resume Intelligence</div>
                </div>
            </div>
            
            <div class="nav-menu">
                <div class="nav-item active" data-page="dashboard">
                    <div class="nav-icon">
                        <i class="fas fa-home"></i>
                    </div>
                    <div class="nav-text">Dashboard</div>
                </div>
                <div class="nav-item" data-page="analytics">
                    <div class="nav-icon">
                        <i class="fas fa-chart-bar"></i>
                    </div>
                    <div class="nav-text">Analytics</div>
                </div>
                <div class="nav-item" data-page="skillGap">
                    <div class="nav-icon">
                        <i class="fas fa-graduation-cap"></i>
                    </div>
                    <div class="nav-text">Skill Gap Analysis</div>
                </div>
                <div class="nav-item" data-page="settings">
                    <div class="nav-icon">
                        <i class="fas fa-cogs"></i>
                    </div>
                    <div class="nav-text">Settings</div>
                </div>
                <div class="nav-item" data-page="help">
                    <div class="nav-icon">
                        <i class="fas fa-question-circle"></i>
                    </div>
                    <div class="nav-text">Help & Support</div>
                </div>
            </div>
            
            <div class="user-profile">
                <div class="user-avatar">JD</div>
                <div class="user-info">
                    <h4>Kasim</h4>
                    <p>HR Manager</p>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Dashboard Container -->
            <div class="dashboard-container">
                <!-- Dashboard Page -->
                <div class="page-section active" id="dashboard">
                    <div class="header">
                        <div>
                            <h1>Resume Intelligence Dashboard</h1>
                            <p>AI-powered analysis for smarter hiring decisions</p>
                        </div>
                        <div class="header-actions">
                            <button class="btn btn-outline" id="exportReportBtn">
                                <i class="fas fa-download"></i> Export Report
                            </button>
                            <button class="btn btn-primary" id="newAnalysisBtn">
                                <i class="fas fa-plus"></i> New Analysis
                            </button>
                        </div>
                    </div>

                    <div class="dashboard">
                        <!-- Input Section -->
                        <div class="card">
                            <div class="card-header">
                                <h2 class="card-title"><i class="fas fa-file-upload"></i> Resume Analysis</h2>
                            </div>
                            <div class="card-body">
                                <div class="upload-area" id="uploadArea">
                                    <div class="upload-icon">
                                        <i class="fas fa-cloud-upload-alt"></i>
                                    </div>
                                    <h3>Upload Resume (PDF, DOCX, TXT)</h3>
                                    <p>Drag & drop or click to upload your resume file</p>
                                    <input type="file" id="resumeFile" accept=".pdf,.docx,.txt" style="display: none;">
                                </div>
                                <h3 class="card-title" style="font-size: 1.1rem; margin-bottom: 15px;">
                                    <i class="fas fa-paste"></i> Or Paste Resume Text
                                </h3>
                                <textarea id="resumeText" placeholder="Paste your resume text here for comprehensive analysis including ATS compatibility, HR metrics, compliance checks, and skills gap analysis..."></textarea>
                                <div style="margin: 15px 0;">
                                <div style="margin: 15px 0;">
                                    <label for="roleSelect" style="font-weight: 500;">Target Job Role:</label>
                                    <select id="roleSelect" style="margin-left: 10px; padding: 6px 12px; border-radius: 8px;">
                                        <option value="">Select a role</option>
                                        <option value="Management">Management</option>
                                        <option value="Technical Individual Contributor">Technical Individual Contributor</option>
                                        <option value="Business Analyst">Business Analyst</option>
                                        <option value="Creative/Design">Creative/Design</option>
                                        <option value="Business Development">Business Development</option>
                                        <option value="General Professional">General Professional</option>
                                    </select>
                                </div>
                                <div style="margin: 15px 0;">
                                    <label for="jobDescInput" style="font-weight: 500;">Job Description (for ATS criteria):</label>
                                    <textarea id="jobDescInput" placeholder="Paste the job description here to customize ATS analysis..." style="width:100%;height:80px;margin-top:8px;border-radius:8px;"></textarea>
                                </div>
                                    <label for="languageSelect" style="font-weight: 500;">Resume Language:</label>
                                    <select id="languageSelect" style="margin-left: 10px; padding: 6px 12px; border-radius: 8px;">
                                        <option value="en">English</option>
                                        <option value="es">Spanish</option>
                                        <option value="fr">French</option>
                                        <option value="de">German</option>
                                        <option value="hi">Hindi</option>
                                        <option value="zh">Chinese</option>
                                        <option value="other">Other</option>
                                    </select>
                                </div>
                                <button class="analyze-btn" id="analyzeBtn">
                                    <i class="fas fa-chart-line"></i> Analyze Resume
                                </button>
                                <div class="loading" id="loading">
                                    <div class="spinner"></div>
                                    <p>Processing your resume with AI analysis...</p>
                                </div>
                            </div>
                        </div>

                        <!-- Results Section -->
                        <div class="card">
                            <div class="card-header">
                                <h2 class="card-title"><i class="fas fa-chart-pie"></i> Analysis Results</h2>
                            </div>
                            <div class="card-body">
                                <div class="results-container" id="resultsContainer">
                                    <!-- ATS Score Card -->
                                    <div class="score-card">
                                        <h3>ATS Compatibility Score</h3>
                                        <div class="progress-ring">
                                            <svg viewBox="0 0 100 100">
                                                <circle class="progress-bg" cx="50" cy="50" r="45"></circle>
                                                <circle class="progress-fill" cx="50" cy="50" r="45" 
                                                        stroke-dasharray="283" stroke-dashoffset="283"></circle>
                                            </svg>
                                            <div class="progress-text">
                                                <span class="progress-value" id="atsScore">-</span>
                                                <span class="progress-label">Score</span>
                                            </div>
                                        </div>
                                        <p>How well your resume passes through Applicant Tracking Systems</p>
                                    </div>
                                    
                                    <!-- Initial Placeholder -->
                                    <div class="insight-card">
                                        <p>Upload a resume or paste text to get detailed ATS analysis and comprehensive HR insights...</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Analytics Page -->
                <div class="page-section" id="analytics">
                    <div class="header">
                        <div>
                            <h1>Advanced Analytics</h1>
                            <p>Deep insights into your hiring process and candidate pipeline</p>
                        </div>
                        <div class="header-actions">
                            <button class="btn btn-outline" id="refreshAnalytics">
                                <i class="fas fa-sync-alt"></i> Refresh Data
                            </button>
                            <button class="btn btn-primary" id="exportAnalytics">
                                <i class="fas fa-download"></i> Export Data
                            </button>
                        </div>
                    </div>

                    <div class="analytics-dashboard" id="analyticsDashboard">
                        <div class="analytics-card">
                            <h3><i class="fas fa-users"></i> Candidate Pipeline</h3>
                            <div class="metric-value" id="pipelineCount">0</div>
                            <p>Active candidates in pipeline</p>
                        </div>
                        <div class="analytics-card">
                            <h3><i class="fas fa-clock"></i> Time to Hire</h3>
                            <div class="metric-value" id="timeToHire">0</div>
                            <p>Average days to hire</p>
                        </div>
                        <div class="analytics-card">
                            <h3><i class="fas fa-dollar-sign"></i> Cost Per Hire</h3>
                            <div class="metric-value" id="costPerHire">$0</div>
                            <p>Average hiring cost</p>
                        </div>
                        <div class="analytics-card">
                            <h3><i class="fas fa-chart-line"></i> Quality of Hire</h3>
                            <div class="metric-value" id="qualityOfHire">0%</div>
                            <p>Based on performance reviews</p>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title"><i class="fas fa-chart-bar"></i> Hiring Metrics</h2>
                        </div>
                        <div class="card-body">
                            <div class="chart-container">
                                <canvas id="hiringChart"></canvas>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title"><i class="fas fa-chart-pie"></i> Skills Distribution</h2>
                        </div>
                        <div class="card-body">
                            <div class="chart-container">
                                <canvas id="skillsChart"></canvas>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title"><i class="fas fa-trend-up"></i> Performance Trends</h2>
                        </div>
                        <div class="card-body">
                            <div class="chart-container">
                                <canvas id="performanceChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Skill Gap Analysis Page -->
                <div class="page-section" id="skillGap">
                    <div class="header">
                        <div>
                            <h1>Skill Gap Analysis</h1>
                            <p>Identify skills to improve based on your resume analysis</p>
                        </div>
                        <div class="header-actions">
                            <button class="btn btn-outline" id="exportSkillGap">
                                <i class="fas fa-download"></i> Export Report
                            </button>
                            <button class="btn btn-primary" id="generateRecommendations">
                                <i class="fas fa-lightbulb"></i> Generate Recommendations
                            </button>
                        </div>
                    </div>

                    <div class="skill-gap-container" id="skillGapContainer">
                        <div class="insight-card">
                            <p>Upload and analyze a resume to view detailed skill gap analysis and improvement recommendations.</p>
                        </div>
                    </div>
                </div>

                <!-- Settings Page -->
                <div class="page-section" id="settings">
                    <div class="header">
                        <div>
                            <h1>Settings & Configuration</h1>
                            <p>Customize your ResumeIQ Pro experience</p>
                        </div>
                    </div>

                    <div class="settings-grid">
                        <div class="settings-menu">
                            <h3>Configuration</h3>
                            <div class="nav-item active" data-setting="general">
                                <i class="fas fa-cog"></i> General Settings
                            </div>
                            <div class="nav-item" data-setting="notifications">
                                <i class="fas fa-bell"></i> Notifications
                            </div>
                            <div class="nav-item" data-setting="integrations">
                                <i class="fas fa-plug"></i> Integrations
                            </div>
                            <div class="nav-item" data-setting="security">
                                <i class="fas fa-shield-alt"></i> Security
                            </div>
                        </div>
                        <div class="settings-content">
                            <h2>General Settings</h2>
                            <p>Configure your basic application preferences and defaults.</p>
                            <!-- Settings content would go here -->
                        </div>
                    </div>
                </div>

                <!-- Help Page -->
                <div class="page-section" id="help">
                    <div class="header">
                        <div>
                            <h1>Help & Support</h1>
                            <p>Get assistance and learn how to use ResumeIQ Pro</p>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title"><i class="fas fa-question-circle"></i> Frequently Asked Questions</h2>
                        </div>
                        <div class="card-body">
                            <div class="insight-card">
                                <h3>How does the ATS scoring work?</h3>
                                <p>Our AI analyzes your resume against 50+ criteria used by popular Applicant Tracking Systems including keyword optimization, formatting, structure, and content quality.</p>
                            </div>
                            <div class="insight-card">
                                <h3>What file formats are supported?</h3>
                                <p>We support PDF, DOCX, and plain text files. For best results, we recommend using PDF format to preserve formatting.</p>
                            </div>
                            <div class="insight-card">
                                <h3>How accurate is the skills gap analysis?</h3>
                                <p>Our skills gap analysis is 92% accurate based on comparison with industry standards and role requirements across major job platforms.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- HR Analytics Sidebar -->
            <div class="hr-analytics-sidebar">
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title"><i class="fas fa-chart-network"></i> HR Analytics Dashboard</h2>
                    </div>
                    <div class="card-body">
                        <div class="analytics-tabs">
                            <button class="analytics-tab active" data-tab="talentAnalytics">
                                <i class="fas fa-chart-line"></i> Talent Analytics
                            </button>
                            <button class="analytics-tab" data-tab="compliance">
                                <i class="fas fa-shield-alt"></i> Compliance & Bias
                            </button>
                            <button class="analytics-tab" data-tab="skillsGap">
                                <i class="fas fa-graduation-cap"></i> Skills Analysis
                            </button>
                        </div>

                        <div id="talentAnalytics" class="analytics-content active">
                            <div class="analytics-placeholder">
                                <i class="fas fa-chart-bar analytics-icon"></i>
                                <p>Resume analysis required to generate comprehensive talent analytics...</p>
                            </div>
                        </div>

                        <div id="compliance" class="analytics-content">
                            <div class="analytics-placeholder">
                                <i class="fas fa-shield-alt analytics-icon"></i>
                                <p>Resume analysis required for compliance checking and bias detection...</p>
                            </div>
                        </div>

                        <div id="skillsGap" class="analytics-content">
                            <div class="analytics-placeholder">
                                <i class="fas fa-graduation-cap analytics-icon"></i>
                                <p>Resume analysis required for comprehensive skills assessment...</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Set up PDF.js
        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.worker.min.js';

        let extractedText = '';
        let currentAnalysis = null;
        let analyticsData = {
            pipelineCount: 0,
            timeToHire: 0,
            costPerHire: 0,
            qualityOfHire: 0,
            hiringTrends: [],
            skillsDistribution: {},
            performanceData: {}
        };

        // Initialize Chart.js instances
        let hiringChart, skillsChart, performanceChart;

        // Advanced ATS & HR Analytics Engine
        class ATSRecruiterAnalyzer {
            constructor() {
                this.atsKeywords = {
                    technical: ['python', 'java', 'javascript', 'react', 'node.js', 'sql', 'aws', 'docker', 'kubernetes', 'html', 'css', 'git', 'rest', 'api'],
                    soft: ['leadership', 'communication', 'teamwork', 'problem solving', 'project management', 'critical thinking', 'adaptability', 'creativity'],
                    education: ['bachelor', 'master', 'phd', 'degree', 'university', 'college'],
                    experience: ['experience', 'years', 'managed', 'led', 'developed', 'implemented']
                };

                this.recruiterChecklist = [
                    'Clear contact information',
                    'Professional email address',
                    'LinkedIn profile included',
                    'Quantifiable achievements',
                    'Action-oriented bullet points',
                    'Relevant skills section',
                    'Work experience in reverse chronological order',
                    'Education section complete',
                    'No spelling/grammar errors',
                    'Appropriate length (1-2 pages)',
                    'Clean formatting',
                    'Consistent font usage',
                    'Clear section headings',
                    'Keywords from job description',
                    'Customized for specific role'
                ];
            }

            analyzeResume(text) {
                const atsScore = this.calculateATSScore(text);
                const keyPoints = this.extractKeyPoints(text);
                const recruiterChecklist = this.checkRecruiterRequirements(text);
                const improvements = this.identifyImprovements(text, atsScore);
                const industryFit = this.analyzeIndustryFit(text);
                
                // HR Analytics Features
                const talentAnalytics = this.generateTalentAnalytics(text, atsScore);
                const complianceResults = this.checkComplianceAndBias(text);
                const skillsGapAnalysis = this.analyzeSkillsGap(text);
                
                // Update analytics data
                this.updateAnalyticsData(talentAnalytics, skillsGapAnalysis, atsScore);
                
                return {
                    atsScore,
                    keyPoints,
                    recruiterChecklist,
                    improvements,
                    industryFit,
                    talentAnalytics,
                    complianceResults,
                    skillsGapAnalysis,
                    summary: this.generateExecutiveSummary(atsScore, keyPoints, recruiterChecklist)
                };
            }

            updateAnalyticsData(talentAnalytics, skillsGapAnalysis, atsScore) {
                // Update pipeline count
                analyticsData.pipelineCount = Math.max(analyticsData.pipelineCount + 1, 1);
                
                // Update time to hire based on candidate quality
                analyticsData.timeToHire = Math.round((analyticsData.timeToHire + talentAnalytics.timeToHireEstimate) / 2);
                
                // Update cost per hire
                analyticsData.costPerHire = Math.round((analyticsData.costPerHire + talentAnalytics.costPerHireSavings) / 2);
                
                // Update quality of hire based on ATS score
                analyticsData.qualityOfHire = Math.round((analyticsData.qualityOfHire + atsScore) / 2);
                
                // Update hiring trends
                const currentMonth = new Date().toLocaleString('default', { month: 'short' });
                const existingMonth = analyticsData.hiringTrends.find(trend => trend.month === currentMonth);
                
                if (existingMonth) {
                    existingMonth.count++;
                } else {
                    analyticsData.hiringTrends.push({
                        month: currentMonth,
                        count: 1
                    });
                }
                
                // Keep only last 6 months
                if (analyticsData.hiringTrends.length > 6) {
                    analyticsData.hiringTrends.shift();
                }
                
                // Update skills distribution
                skillsGapAnalysis.currentSkills.technical.forEach(skill => {
                    analyticsData.skillsDistribution[skill] = (analyticsData.skillsDistribution[skill] || 0) + 1;
                });
                
                skillsGapAnalysis.currentSkills.soft.forEach(skill => {
                    analyticsData.skillsDistribution[skill] = (analyticsData.skillsDistribution[skill] || 0) + 1;
                });
                
                // Update performance data
                analyticsData.performanceData = {
                    atsScore: atsScore,
                    leadershipPotential: talentAnalytics.leadershipPotential,
                    culturalAdd: talentAnalytics.culturalAddScore,
                    retentionRisk: talentAnalytics.retentionRisk
                };
            }

            calculateATSScore(text) {
                let score = 0;
                const textLower = text.toLowerCase();
                
                // Keyword density (30 points)
                const totalKeywords = Object.values(this.atsKeywords).flat();
                const foundKeywords = totalKeywords.filter(keyword => 
                    textLower.includes(keyword.toLowerCase())
                ).length;
                score += (foundKeywords / totalKeywords.length) * 30;

                // Structure and formatting (25 points)
                score += this.analyzeStructure(text);

                // Contact information (15 points)
                score += this.checkContactInfo(text);

                // Achievements and metrics (20 points)
                score += this.analyzeAchievements(text);

                // Readability and length (10 points)
                score += this.analyzeReadability(text);

                return Math.min(Math.round(score), 100);
            }

            analyzeStructure(text) {
                let structureScore = 0;
                const sections = ['experience', 'education', 'skills', 'summary', 'projects'];
                const lines = text.split('\n');
                
                sections.forEach(section => {
                    if (text.toLowerCase().includes(section)) {
                        structureScore += 5;
                    }
                });

                const bulletPoints = lines.filter(line => 
                    line.trim().startsWith('•') || 
                    line.trim().startsWith('-') || 
                    line.trim().match(/^\d+\./)
                ).length;
                structureScore += Math.min(bulletPoints * 2, 10);

                return structureScore;
            }

            checkContactInfo(text) {
                let contactScore = 0;
                
                const emailMatch = text.match(/\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Z|a-z]{2,}\b/);
                if (emailMatch) contactScore += 5;

                const phoneMatch = text.match(/[\+\(]?[1-9][0-9 .\-\(\)]{8,}[0-9]/);
                if (phoneMatch) contactScore += 5;

                if (text.toLowerCase().includes('linkedin.com')) contactScore += 5;

                return contactScore;
            }

            analyzeAchievements(text) {
                let achievementScore = 0;
                const lines = text.split('\n');
                
                const quantitativeIndicators = [
                    /\d+%/g,
                    /\$\d+/g,
                    /\d+\s*(?:x|times)/gi,
                    /increased by \d+/gi,
                    /reduced by \d+/gi,
                    /improved by \d+/gi
                ];

                let quantitativeCount = 0;
                lines.forEach(line => {
                    quantitativeIndicators.forEach(pattern => {
                        const matches = line.match(pattern);
                        if (matches) quantitativeCount += matches.length;
                    });
                });

                achievementScore += Math.min(quantitativeCount * 3, 15);

                const actionVerbs = ['led', 'managed', 'developed', 'implemented', 'created', 'achieved', 'improved'];
                const actionCount = actionVerbs.filter(verb => 
                    text.toLowerCase().includes(verb)
                ).length;
                achievementScore += Math.min(actionCount, 5);

                return achievementScore;
            }

            analyzeReadability(text) {
                const wordCount = text.split(/\s+/).length;
                
                if (wordCount >= 400 && wordCount <= 800) return 10;
                if (wordCount >= 300 && wordCount <= 1000) return 7;
                if (wordCount >= 200 && wordCount <= 1200) return 5;
                return 3;
            }

            extractKeyPoints(text) {
                const keyPoints = [];
                const lines = text.split('\n').filter(line => line.trim().length > 10);
                
                lines.forEach(line => {
                    const cleanLine = line.trim();
                    
                    const hasNumbers = /\d/.test(cleanLine);
                    const hasActionVerb = /(led|managed|created|developed|implemented|achieved)/i.test(cleanLine);
                    const hasSeniority = /(senior|lead|principal|director|manager|head)/i.test(cleanLine);
                    const hasCompany = /(at|@|\|)/.test(cleanLine) && cleanLine.length < 100;
                    
                    if ((hasNumbers && hasActionVerb) || hasSeniority || hasCompany) {
                        keyPoints.push(cleanLine);
                    }
                });

                return keyPoints.slice(0, 8);
            }

            checkRecruiterRequirements(text) {
                const checklistResults = this.recruiterChecklist.map(item => {
                    let checked = false;
                    let details = '';

                    switch(item) {
                        case 'Clear contact information':
                            checked = this.checkContactInfo(text) >= 10;
                            details = checked ? 'Email, phone, and LinkedIn found' : 'Missing contact details';
                            break;
                        case 'Professional email address':
                            const email = text.match(/\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Z|a-z]{2,}\b/);
                            checked = email && !email[0].includes('gmail.com') && !email[0].includes('yahoo.com');
                            details = checked ? 'Professional email found' : 'Consider using professional email';
                            break;
                        case 'LinkedIn profile included':
                            checked = text.toLowerCase().includes('linkedin.com');
                            details = checked ? 'LinkedIn profile found' : 'Add LinkedIn profile URL';
                            break;
                        case 'Quantifiable achievements':
                            checked = this.analyzeAchievements(text) >= 10;
                            details = checked ? 'Good use of metrics' : 'Add more numbers and metrics';
                            break;
                        case 'Action-oriented bullet points':
                            const bulletCount = text.split('\n').filter(line => 
                                line.trim().startsWith('•') || line.trim().startsWith('-')
                            ).length;
                            checked = bulletCount >= 5;
                            details = checked ? `${bulletCount} bullet points found` : 'Use more bullet points';
                            break;
                        case 'Relevant skills section':
                            checked = text.toLowerCase().includes('skills') && 
                                    text.split('\n').some(line => 
                                        line.toLowerCase().includes('skills') && line.length < 50
                                    );
                            details = checked ? 'Skills section found' : 'Add dedicated skills section';
                            break;
                        case 'Work experience in reverse chronological order':
                            const dates = text.match(/\b(?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s+\d{4}\b|\b\d{4}\b/gi);
                            checked = dates && dates.length >= 2;
                            details = checked ? 'Chronological order detected' : 'Ensure reverse chronological order';
                            break;
                        case 'Education section complete':
                            checked = text.toLowerCase().includes('education') && 
                                    (text.toLowerCase().includes('bachelor') || 
                                     text.toLowerCase().includes('master') || 
                                     text.toLowerCase().includes('degree'));
                            details = checked ? 'Education section complete' : 'Complete education details';
                            break;
                        case 'No spelling/grammar errors':
                            const commonErrors = ['recieve', 'seperate', 'definately', 'accomodate'];
                            checked = !commonErrors.some(error => text.toLowerCase().includes(error));
                            details = checked ? 'No obvious spelling errors' : 'Check for spelling errors';
                            break;
                        case 'Appropriate length (1-2 pages)':
                            const wordCount = text.split(/\s+/).length;
                            checked = wordCount >= 300 && wordCount <= 1000;
                            details = checked ? `Good length (${wordCount} words)` : `Consider adjusting length (${wordCount} words)`;
                            break;
                        default:
                            checked = true;
                            details = 'Automatically checked';
                    }

                    return { item, checked, details };
                });

                return checklistResults;
            }

            identifyImprovements(text, atsScore) {
                const improvements = [];

                if (atsScore < 70) {
                    improvements.push("Low ATS score - Add more relevant keywords from job description");
                }

                const contactScore = this.checkContactInfo(text);
                if (contactScore < 10) {
                    improvements.push("Add missing contact information (email, phone, LinkedIn)");
                }

                const achievementScore = this.analyzeAchievements(text);
                if (achievementScore < 10) {
                    improvements.push("Include more quantifiable achievements with numbers and metrics");
                }

                if (!text.toLowerCase().includes('linkedin.com')) {
                    improvements.push("Add LinkedIn profile URL");
                }

                const wordCount = text.split(/\s+/).length;
                if (wordCount < 300) {
                    improvements.push("Resume might be too short - add more detail about your experience");
                } else if (wordCount > 1000) {
                    improvements.push("Resume might be too long - consider condensing to 2 pages maximum");
                }

                const actionVerbs = ['led', 'managed', 'developed', 'implemented', 'created'];
                const hasActionVerbs = actionVerbs.some(verb => text.toLowerCase().includes(verb));
                if (!hasActionVerbs) {
                    improvements.push("Use more action-oriented language (led, managed, developed, etc.)");
                }

                return improvements;
            }

            analyzeIndustryFit(text) {
                const industries = {
                    'Technology': ['software', 'developer', 'engineer', 'programming', 'code', 'agile'],
                    'Finance': ['finance', 'banking', 'investment', 'accounting', 'financial', 'portfolio'],
                    'Healthcare': ['healthcare', 'medical', 'patient', 'clinical', 'hospital'],
                    'Marketing': ['marketing', 'brand', 'campaign', 'digital', 'social media'],
                    'Sales': ['sales', 'revenue', 'clients', 'accounts', 'business development']
                };

                const scores = {};
                const textLower = text.toLowerCase();

                for (const [industry, keywords] of Object.entries(industries)) {
                    const matchCount = keywords.filter(keyword => textLower.includes(keyword)).length;
                    scores[industry] = Math.round((matchCount / keywords.length) * 100);
                }

                const topIndustries = Object.entries(scores)
                    .sort(([,a], [,b]) => b - a)
                    .slice(0, 2)
                    .map(([industry, score]) => ({ industry, score }));

                return topIndustries;
            }

            generateExecutiveSummary(atsScore, keyPoints, checklist) {
                const passedChecks = checklist.filter(item => item.checked).length;
                const totalChecks = checklist.length;
                const passRate = Math.round((passedChecks / totalChecks) * 100);

                let summary = `ATS Score: ${atsScore}/100 | Recruiter Checklist: ${passRate}% passed\n\n`;

                if (atsScore >= 80) {
                    summary += "✅ Excellent ATS compatibility - high chance of passing automated screening\n";
                } else if (atsScore >= 60) {
                    summary += "⚠ Good ATS compatibility - some improvements needed\n";
                } else {
                    summary += "❌ Poor ATS compatibility - significant improvements needed\n";
                }

                summary += `\nKey Strengths:\n`;
                keyPoints.slice(0, 3).forEach(point => {
                    summary += `• ${point}\n`;
                });

                return summary;
            }

            generateTalentAnalytics(text, atsScore) {
                const wordCount = text.split(/\s+/).length;
                const experienceLevel = this.assessExperienceLevel(text);
                const leadershipPotential = this.assessLeadershipPotential(text);
                const culturalAddScore = this.assessCulturalAdd(text);
                
                return {
                    candidateQuality: atsScore,
                    timeToHireEstimate: this.calculateTimeToHire(atsScore, experienceLevel),
                    costPerHireSavings: this.calculateCostSavings(atsScore),
                    diversityScore: this.assessDiversityFactors(text),
                    retentionRisk: this.assessRetentionRisk(text),
                    experienceLevel,
                    leadershipPotential,
                    culturalAddScore,
                    overallFit: Math.round((atsScore + leadershipPotential + culturalAddScore) / 3)
                };
            }

            assessExperienceLevel(text) {
                let score = 50;
                const textLower = text.toLowerCase();
                
                if (textLower.includes('senior') || textLower.includes('lead') || textLower.includes('principal')) score += 20;
                if (textLower.includes('manager') || textLower.includes('director') || textLower.includes('head')) score += 25;
                if (textLower.includes('vp') || textLower.includes('c-level') || textLower.includes('chief')) score += 30;
                
                const yearsMatches = text.match(/(\d+)\+?\s*years?/gi);
                if (yearsMatches) {
                    const years = yearsMatches.map(match => parseInt(match)).reduce((a, b) => a + b, 0);
                    if (years >= 10) score += 20;
                    else if (years >= 5) score += 15;
                    else if (years >= 2) score += 10;
                }
                
                return Math.min(score, 100);
            }

            assessLeadershipPotential(text) {
                let score = 50;
                const leadershipKeywords = [
                    'led', 'managed', 'directed', 'oversaw', 'supervised', 'mentored',
                    'team', 'group', 'department', 'initiative', 'strategy', 'vision'
                ];
                
                const matches = leadershipKeywords.filter(keyword => 
                    text.toLowerCase().includes(keyword)
                ).length;
                
                score += Math.min(matches * 5, 40);
                
                if (text.match(/(\d+)\s*(?:people|team|members?|reports?)/gi)) score += 10;
                
                return Math.min(score, 100);
            }

            assessCulturalAdd(text) {
                let score = 70;
                
                if (text.match(/(international|global|multinational)/gi)) score += 10;
                
                const languages = text.match(/(english|spanish|french|german|mandarin|japanese|hindi)/gi);
                if (languages && languages.length > 1) score += 10;
                
                if (text.match(/(volunteer|non-profit|community|diversity|inclusion)/gi)) score += 10;
                
                return Math.min(score, 100);
            }

            calculateTimeToHire(atsScore, experienceLevel) {
                const baseDays = 45;
                const scoreImpact = (100 - atsScore) * 0.2;
                const experienceImpact = (100 - experienceLevel) * 0.1;
                
                return Math.round(baseDays - scoreImpact - experienceImpact);
            }

            calculateCostSavings(atsScore) {
                const baseCost = 5000;
                const savingsPercentage = atsScore / 100;
                
                return Math.round(baseCost * savingsPercentage);
            }

            assessDiversityFactors(text) {
                let score = 75;
                
                const topSchools = ['harvard', 'stanford', 'mit', 'yale', 'princeton'];
                const hasTopSchool = topSchools.some(school => text.toLowerCase().includes(school));
                if (!hasTopSchool) score += 10;
                
                return Math.min(score, 100);
            }

            assessRetentionRisk(text) {
                let risk = 30;
                
                const companies = text.match(/(?:at|,)\s+([A-Z][a-zA-Z\s&]+)(?=\s|$)/gi);
                if (companies && companies.length > 4) risk += 20;
                
                if (text.match(/(\d{4})\s*-\s*(\d{4})/g)) {
                    const tenures = text.match(/(\d{4})\s*-\s*(\d{4})/g);
                    const shortTenures = tenures.filter(tenure => {
                        const years = parseInt(tenure.split('-')[1]) - parseInt(tenure.split('-')[0]);
                        return years < 2;
                    });
                    risk += shortTenures.length * 10;
                }
                
                return Math.min(risk, 100);
            }

            checkComplianceAndBias(text) {
                const complianceResults = [];
                
                complianceResults.push({
                    category: 'EEOC Compliance',
                    check: 'No Age Indicators',
                    status: !text.match(/\b(?:born|age|\d{2}\s*years\s*old)\b/gi) ? 'pass' : 'fail',
                    details: !text.match(/\b(?:born|age|\d{2}\s*years\s*old)\b/gi) ? 
                        'No age-related information detected' : 'Potential age indicators found'
                });
                
                complianceResults.push({
                    category: 'EEOC Compliance',
                    check: 'No Gender Indicators',
                    status: !text.match(/\b(?:he|she|his|hers|male|female)\b/gi) ? 'pass' : 'warning',
                    details: !text.match(/\b(?:he|she|his|hers|male|female)\b/gi) ? 
                        'No gender-specific pronouns detected' : 'Gender-specific language detected'
                });
                
                complianceResults.push({
                    category: 'EEOC Compliance',
                    check: 'No Marital/Family Status',
                    status: !text.match(/\b(?:married|single|divorced|children|kids)\b/gi) ? 'pass' : 'fail',
                    details: !text.match(/\b(?:married|single|divorced|children|kids)\b/gi) ? 
                        'No marital/family status detected' : 'Marital/family status information found'
                });
                
                complianceResults.push({
                    category: 'Bias Detection',
                    check: 'Leadership Language',
                    status: text.match(/\b(?:led|managed|directed|executed)\b/gi) ? 'pass' : 'warning',
                    details: text.match(/\b(?:led|managed|directed|executed)\b/gi) ? 
                        'Strong leadership language present' : 'Consider adding more leadership-oriented verbs'
                });
                
                complianceResults.push({
                    category: 'Bias Detection',
                    check: 'Achievement Quantification',
                    status: text.match(/\d+%|\$\d+|\d+\s*(?:x|times)/gi) ? 'pass' : 'warning',
                    details: text.match(/\d+%|\$\d+|\d+\s*(?:x|times)/gi) ? 
                        'Quantifiable achievements present' : 'Add more measurable results'
                });
                
                complianceResults.push({
                    category: 'Bias Detection',
                    check: 'Inclusive Language',
                    status: !text.match(/\b(?:rockstar|ninja|guru|dominant|aggressive)\b/gi) ? 'pass' : 'warning',
                    details: !text.match(/\b(?:rockstar|ninja|guru|dominant|aggressive)\b/gi) ? 
                        'Inclusive language used' : 'Consider more inclusive terminology'
                });
                
                return complianceResults;
            }

            analyzeSkillsGap(text) {
                const currentSkills = this.extractSkills(text);
                const targetRoles = this.identifyTargetRoles(text);
                
                return {
                    currentSkills,
                    targetRoles,
                    skillGaps: this.identifySkillGaps(currentSkills, targetRoles),
                    developmentRecommendations: this.generateDevelopmentPlan(currentSkills, targetRoles),
                    internalMobility: this.assessInternalMobility(currentSkills),
                    skillMatchPercentage: this.calculateSkillMatchPercentage(currentSkills, targetRoles)
                };
            }

            extractSkills(text) {
                const skills = {
                    technical: [],
                    soft: [],
                    leadership: [],
                    industry: []
                };
                
                const textLower = text.toLowerCase();
                
                const techSkills = ['python', 'java', 'javascript', 'react', 'node.js', 'sql', 'aws', 'docker', 'kubernetes', 'html', 'css', 'git', 'rest', 'api', 'typescript', 'mongodb', 'postgresql', 'graphql'];
                skills.technical = techSkills.filter(skill => textLower.includes(skill));
                
                const softSkills = ['communication', 'leadership', 'teamwork', 'problem solving', 'project management', 'critical thinking', 'adaptability', 'creativity', 'time management', 'collaboration'];
                skills.soft = softSkills.filter(skill => textLower.includes(skill));
                
                const leadershipSkills = ['strategic planning', 'budget management', 'team leadership', 'stakeholder management', 'decision making', 'conflict resolution'];
                skills.leadership = leadershipSkills.filter(skill => textLower.includes(skill));
                
                return skills;
            }

            identifyTargetRoles(text) {
                const roles = [];
                const textLower = text.toLowerCase();
                
                if (textLower.includes('manager') || textLower.includes('director') || textLower.includes('lead')) roles.push('Management');
                if (textLower.includes('developer') || textLower.includes('engineer') || textLower.includes('programmer')) roles.push('Technical Individual Contributor');
                if (textLower.includes('analyst') || textLower.includes('data')) roles.push('Business Analyst');
                if (textLower.includes('designer') || textLower.includes('ux') || textLower.includes('ui')) roles.push('Creative/Design');
                if (textLower.includes('sales') || textLower.includes('account') || textLower.includes('business development')) roles.push('Business Development');
                
                return roles.length > 0 ? roles : ['General Professional'];
            }

            identifySkillGaps(currentSkills, targetRoles) {
                const gaps = [];
                const roleRequirements = {
                    'Management': ['budget management', 'strategic planning', 'performance management', 'team leadership', 'stakeholder management'],
                    'Technical Individual Contributor': ['cloud computing', 'agile methodology', 'ci/cd', 'system design', 'debugging'],
                    'Business Analyst': ['data analysis', 'requirements gathering', 'process mapping', 'sql', 'data visualization'],
                    'Creative/Design': ['user research', 'wireframing', 'prototyping', 'design systems', 'usability testing'],
                    'Business Development': ['client acquisition', 'negotiation', 'market analysis', 'sales strategy', 'relationship building']
                };
                
                targetRoles.forEach(role => {
                    if (roleRequirements[role]) {
                        roleRequirements[role].forEach(requiredSkill => {
                            if (!currentSkills.technical.concat(currentSkills.soft, currentSkills.leadership)
                                .some(skill => skill.toLowerCase().includes(requiredSkill))) {
                                gaps.push({
                                    role: role,
                                    skill: requiredSkill,
                                    priority: 'High'
                                });
                            }
                        });
                    }
                });
                
                return gaps;
            }

            calculateSkillMatchPercentage(currentSkills, targetRoles) {
                const roleRequirements = {
                    'Management': ['budget management', 'strategic planning', 'performance management', 'team leadership', 'stakeholder management'],
                    'Technical Individual Contributor': ['cloud computing', 'agile methodology', 'ci/cd', 'system design', 'debugging'],
                    'Business Analyst': ['data analysis', 'requirements gathering', 'process mapping', 'sql', 'data visualization'],
                    'Creative/Design': ['user research', 'wireframing', 'prototyping', 'design systems', 'usability testing'],
                    'Business Development': ['client acquisition', 'negotiation', 'market analysis', 'sales strategy', 'relationship building']
                };
                
                let totalRequiredSkills = 0;
                let matchedSkills = 0;
                
                targetRoles.forEach(role => {
                    if (roleRequirements[role]) {
                        roleRequirements[role].forEach(requiredSkill => {
                            totalRequiredSkills++;
                            if (currentSkills.technical.concat(currentSkills.soft, currentSkills.leadership)
                                .some(skill => skill.toLowerCase().includes(requiredSkill))) {
                                matchedSkills++;
                            }
                        });
                    }
                });
                
                return totalRequiredSkills > 0 ? Math.round((matchedSkills / totalRequiredSkills) * 100) : 0;
            }

            generateDevelopmentPlan(currentSkills, targetRoles) {
                const recommendations = [];
                
                if (targetRoles.includes('Management') && !currentSkills.leadership.includes('budget management')) {
                    recommendations.push('Financial management training');
                }
                
                if (currentSkills.technical.length < 3) {
                    recommendations.push('Technical skills certification program');
                }
                
                if (!currentSkills.soft.includes('strategic thinking')) {
                    recommendations.push('Strategic leadership workshop');
                }
                
                if (targetRoles.includes('Technical Individual Contributor') && !currentSkills.technical.includes('cloud computing')) {
                    recommendations.push('Cloud computing certification (AWS, Azure, or GCP)');
                }
                
                if (targetRoles.includes('Business Analyst') && !currentSkills.technical.includes('sql')) {
                    recommendations.push('SQL and database management course');
                }
                
                return recommendations.length > 0 ? recommendations : ['No specific development needs identified'];
            }

            assessInternalMobility(currentSkills) {
                const mobility = [];
                
                if (currentSkills.technical.length >= 3) {
                    mobility.push('Technical lead roles');
                }
                
                if (currentSkills.soft.includes('leadership') && currentSkills.soft.includes('communication')) {
                    mobility.push('Team management positions');
                }
                
                return mobility.length > 0 ? mobility : ['Lateral moves within current function'];
            }
        }

        // Initialize analyzer
        const analyzer = new ATSRecruiterAnalyzer();

        // Navigation functionality
        document.querySelectorAll('.nav-item').forEach(item => {
            item.addEventListener('click', function() {
                // Remove active class from all nav items
                document.querySelectorAll('.nav-item').forEach(nav => {
                    nav.classList.remove('active');
                });
                
                // Add active class to clicked item
                this.classList.add('active');
                
                // Hide all page sections
                document.querySelectorAll('.page-section').forEach(section => {
                    section.classList.remove('active');
                });
                
                // Show selected page
                const pageId = this.getAttribute('data-page');
                document.getElementById(pageId).classList.add('active');
                
                // Initialize charts if on analytics page
                if (pageId === 'analytics') {
                    initializeCharts();
                    updateAnalyticsDashboard();
                }
            });
        });

        // Tab switching functionality
        document.querySelectorAll('.analytics-tab').forEach(tab => {
            tab.addEventListener('click', function() {
                // Remove active class from all tabs
                document.querySelectorAll('.analytics-tab').forEach(t => {
                    t.classList.remove('active');
                });
                
                // Add active class to clicked tab
                this.classList.add('active');
                
                // Hide all tab contents
                document.querySelectorAll('.analytics-content').forEach(content => {
                    content.classList.remove('active');
                });
                
                // Show selected tab content
                const tabId = this.getAttribute('data-tab');
                document.getElementById(tabId).classList.add('active');
            });
        });

        // Update analytics dashboard with real data
        function updateAnalyticsDashboard() {
            document.getElementById('pipelineCount').textContent = analyticsData.pipelineCount;
            document.getElementById('timeToHire').textContent = analyticsData.timeToHire;
            document.getElementById('costPerHire').textContent = `$${analyticsData.costPerHire}`;
            document.getElementById('qualityOfHire').textContent = `${analyticsData.qualityOfHire}%`;
        }

        // Initialize charts
        function initializeCharts() {
            // Hiring Trends Chart
            const hiringCtx = document.getElementById('hiringChart').getContext('2d');
            
            if (hiringChart) {
                hiringChart.destroy();
            }
            
            const months = analyticsData.hiringTrends.map(trend => trend.month);
            const counts = analyticsData.hiringTrends.map(trend => trend.count);
            
            hiringChart = new Chart(hiringCtx, {
                type: 'bar',
                data: {
                    labels: months.length > 0 ? months : ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                    datasets: [{
                        label: 'Candidates Hired',
                        data: counts.length > 0 ? counts : [12, 19, 15, 22, 18, 25],
                        backgroundColor: 'rgba(42, 75, 124, 0.8)',
                        borderColor: 'rgba(42, 75, 124, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });

            // Skills Distribution Chart
            const skillsCtx = document.getElementById('skillsChart').getContext('2d');
            
            if (skillsChart) {
                skillsChart.destroy();
            }
            
            const skillsLabels = Object.keys(analyticsData.skillsDistribution);
            const skillsData = Object.values(analyticsData.skillsDistribution);
            
            skillsChart = new Chart(skillsCtx, {
                type: 'doughnut',
                data: {
                    labels: skillsLabels.length > 0 ? skillsLabels : ['JavaScript', 'Python', 'React', 'Node.js', 'SQL'],
                    datasets: [{
                        data: skillsData.length > 0 ? skillsData : [30, 25, 20, 15, 10],
                        backgroundColor: [
                            'rgba(42, 75, 124, 0.8)',
                            'rgba(212, 175, 55, 0.8)',
                            'rgba(39, 174, 96, 0.8)',
                            'rgba(230, 126, 34, 0.8)',
                            'rgba(231, 76, 60, 0.8)'
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false
                }
            });

            // Performance Trends Chart
            const performanceCtx = document.getElementById('performanceChart').getContext('2d');
            
            if (performanceChart) {
                performanceChart.destroy();
            }
            
            performanceChart = new Chart(performanceCtx, {
                type: 'radar',
                data: {
                    labels: ['ATS Score', 'Leadership', 'Cultural Fit', 'Retention Risk'],
                    datasets: [{
                        label: 'Candidate Performance',
                        data: [
                            analyticsData.performanceData.atsScore || 75,
                            analyticsData.performanceData.leadershipPotential || 70,
                            analyticsData.performanceData.culturalAdd || 65,
                            100 - (analyticsData.performanceData.retentionRisk || 25)
                        ],
                        backgroundColor: 'rgba(42, 75, 124, 0.2)',
                        borderColor: 'rgba(42, 75, 124, 1)',
                        borderWidth: 2,
                        pointBackgroundColor: 'rgba(42, 75, 124, 1)'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            beginAtZero: true,
                            max: 100
                        }
                    }
                }
            });
        }

        // Update progress ring
        function updateProgressRing(score) {
            const circle = document.querySelector('.progress-fill');
            const radius = circle.r.baseVal.value;
            const circumference = radius * 2 * Math.PI;
            const offset = circumference - (score / 100) * circumference;
            
            circle.style.strokeDasharray = `${circumference} ${circumference}`;
            circle.style.strokeDashoffset = circumference;
            
            // Trigger animation
            setTimeout(() => {
                circle.style.strokeDashoffset = offset;
            }, 100);
        }

        // Update HR Analytics tabs with data
        function updateHRAnalytics(analysis) {
            // Talent Analytics Tab
            const talentAnalytics = document.getElementById('talentAnalytics');
            talentAnalytics.innerHTML = `
                <div class="metric-grid">
                    <div class="metric-card" style="background: var(--card-bg, #1a1f2e); border: 1px solid var(--border-color, #2d3544); color: var(--text-primary, #e2e8f0);">
                        <div style="color: var(--text-secondary, #94a3b8);">Candidate Quality</div>
                        <div class="metric-value" style="color: var(--primary, #3b82f6); font-size: 1.5rem; font-weight: bold;">${analysis.talentAnalytics.candidateQuality}/100</div>
                        <div style="color: var(--text-secondary, #94a3b8);">ATS Based</div>
                    </div>
                    <div class="metric-card" style="background: var(--card-bg, #1a1f2e); border: 1px solid var(--border-color, #2d3544); color: var(--text-primary, #e2e8f0);">
                        <div style="color: var(--text-secondary, #94a3b8);">Time-to-Hire</div>
                        <div class="metric-value" style="color: var(--primary, #3b82f6); font-size: 1.5rem; font-weight: bold;">${analysis.talentAnalytics.timeToHireEstimate}</div>
                        <div style="color: var(--text-secondary, #94a3b8);">Days</div>
                    </div>
                    <div class="metric-card" style="background: var(--card-bg, #1a1f2e); border: 1px solid var(--border-color, #2d3544); color: var(--text-primary, #e2e8f0);">
                        <div style="color: var(--text-secondary, #94a3b8);">Cost Savings</div>
                        <div class="metric-value" style="color: var(--primary, #3b82f6); font-size: 1.5rem; font-weight: bold;">$${analysis.talentAnalytics.costPerHireSavings}</div>
                        <div style="color: var(--text-secondary, #94a3b8);">Potential</div>
                    </div>
                </div>

                <div class="insight-card" style="background: var(--card-bg, #1a1f2e); border: 1px solid var(--border-color, #2d3544); padding: 1.5rem; border-radius: 0.5rem; margin-top: 1rem;">
                    <h4 style="color: var(--text-primary, #e2e8f0); margin-bottom: 1rem;">🎯 Talent Assessment</h4>
                    <p style="color: var(--text-primary, #e2e8f0); margin: 0.5rem 0;"><strong style="color: var(--primary, #3b82f6);">Experience Level:</strong> ${analysis.talentAnalytics.experienceLevel >= 80 ? 'Senior' : 'Mid-Level'}</p>
                    <p style="color: var(--text-primary, #e2e8f0); margin: 0.5rem 0;"><strong style="color: var(--primary, #3b82f6);">Leadership Potential:</strong> ${analysis.talentAnalytics.leadershipPotential}%</p>
                    <p style="color: var(--text-primary, #e2e8f0); margin: 0.5rem 0;"><strong style="color: var(--primary, #3b82f6);">Cultural Add Score:</strong> ${analysis.talentAnalytics.culturalAddScore}%</p>
                </div>
            `;

            // Compliance Tab
            const compliance = document.getElementById('compliance');
            compliance.innerHTML = `
                <h4>⚖️ Compliance & Bias Analysis</h4>
                <div class="compliance-grid">
                    ${analysis.complianceResults.map(item => `
                        <div class="compliance-item ${item.status === 'pass' ? 'compliance-pass' : item.status === 'warning' ? 'compliance-warning' : 'compliance-fail'}" 
                             style="background: var(--${item.status === 'pass' ? 'success' : item.status === 'warning' ? 'warning' : 'error'}-bg, ${item.status === 'pass' ? '#1a2e1a' : item.status === 'warning' ? '#2e2a1a' : '#2e1a1a'}); 
                                    border: 1px solid var(--${item.status === 'pass' ? 'success' : item.status === 'warning' ? 'warning' : 'error'}-border, ${item.status === 'pass' ? '#22c55e' : item.status === 'warning' ? '#eab308' : '#dc2626'}); 
                                    color: var(--${item.status === 'pass' ? 'success' : item.status === 'warning' ? 'warning' : 'error'}-text, ${item.status === 'pass' ? '#dcfce7' : item.status === 'warning' ? '#fef9c3' : '#fee2e2'});">
                            <strong style="color: var(--${item.status === 'pass' ? 'success' : item.status === 'warning' ? 'warning' : 'error'}-heading, ${item.status === 'pass' ? '#4ade80' : item.status === 'warning' ? '#facc15' : '#ef4444'});">${item.check}</strong>
                            <div style="color: inherit;">Status: ${item.status.toUpperCase()}</div>
                            <small style="color: var(--text-secondary, #94a3b8);">${item.details}</small>
                        </div>
                    `).join('')}
                </div>
            `;

            // Skills Gap Tab
            const skillsGap = document.getElementById('skillsGap');
            skillsGap.innerHTML = `
                <h4>🔧 Skills Analysis</h4>
                <div class="skills-matrix">
                    <div class="skill-category">
                        <h5>Technical Skills</h5>
                        ${analysis.skillsGapAnalysis.currentSkills.technical.map(skill => `
                            <div class="skill-item">
                                <span>${skill}</span>
                                <span>✅</span>
                            </div>
                        `).join('')}
                    </div>
                    <div class="skill-category">
                        <h5>Soft Skills</h5>
                        ${analysis.skillsGapAnalysis.currentSkills.soft.map(skill => `
                            <div class="skill-item">
                                <span>${skill}</span>
                                <span>✅</span>
                            </div>
                        `).join('')}
                    </div>
                </div>

                <div class="insight-card">
                    <h4>📚 Development Recommendations</h4>
                    ${analysis.skillsGapAnalysis.developmentRecommendations.map(rec => `
                        <div class="skill-item">
                            <span>${rec}</span>
                        </div>
                    `).join('')}
                </div>
            `;
        }

        // Display Skill Gap Analysis
        function displaySkillGapAnalysis(analysis) {
            const container = document.getElementById('skillGapContainer');
            const skillsGap = analysis.skillsGapAnalysis;
            
            container.innerHTML = `
                <div class="score-card">
                    <h3>Overall Skill Match</h3>
                    <div class="progress-ring">
                        <svg viewBox="0 0 100 100">
                            <circle class="progress-bg" cx="50" cy="50" r="45"></circle>
                            <circle class="progress-fill" cx="50" cy="50" r="45" 
                                    stroke-dasharray="283" stroke-dashoffset="283"></circle>
                        </svg>
                        <div class="progress-text">
                            <span class="progress-value">${skillsGap.skillMatchPercentage}%</span>
                            <span class="progress-label">Match</span>
                        </div>
                    </div>
                    <p>How well your skills match your target roles</p>
                </div>

                <div class="insight-card">
                    <h3><i class="fas fa-bullseye"></i> Target Roles Identified</h3>
                    <div class="skill-details">
                        <div class="current-skills">
                            <h4>Your Target Roles</h4>
                            <ul class="skill-list">
                                ${skillsGap.targetRoles.map(role => `<li><i class="fas fa-check"></i> ${role}</li>`).join('')}
                            </ul>
                        </div>
                        <div class="missing-skills">
                            <h4>Internal Mobility Options</h4>
                            <ul class="skill-list">
                                ${skillsGap.internalMobility.map(option => `<li><i class="fas fa-arrow-right"></i> ${option}</li>`).join('')}
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="skill-category-card">
                    <div class="skill-category-header">
                        <h3 class="skill-category-title"><i class="fas fa-code"></i> Technical Skills</h3>
                        <span class="skill-match">${Math.round((skillsGap.currentSkills.technical.length / 18) * 100)}% Match</span>
                    </div>
                    <div class="skill-progress-bar">
                        <div class="skill-progress-fill ${Math.round((skillsGap.currentSkills.technical.length / 18) * 100) >= 70 ? 'skill-progress-excellent' : Math.round((skillsGap.currentSkills.technical.length / 18) * 100) >= 50 ? 'skill-progress-good' : 'skill-progress-poor'}" 
                             style="width: ${Math.round((skillsGap.currentSkills.technical.length / 18) * 100)}%"></div>
                    </div>
                    <div class="skill-details">
                        <div class="current-skills">
                            <h4>Your Technical Skills</h4>
                            <ul class="skill-list">
                                ${skillsGap.currentSkills.technical.map(skill => `<li><i class="fas fa-check"></i> ${skill}</li>`).join('')}
                            </ul>
                        </div>
                        <div class="missing-skills">
                            <h4>Technical Skills to Develop</h4>
                            <ul class="skill-list">
                                ${skillsGap.skillGaps.filter(gap => gap.role === 'Technical Individual Contributor').slice(0, 5).map(gap => `<li><i class="fas fa-plus"></i> ${gap.skill}</li>`).join('')}
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="skill-category-card">
                    <div class="skill-category-header">
                        <h3 class="skill-category-title"><i class="fas fa-users"></i> Soft Skills</h3>
                        <span class="skill-match">${Math.round((skillsGap.currentSkills.soft.length / 10) * 100)}% Match</span>
                    </div>
                    <div class="skill-progress-bar">
                        <div class="skill-progress-fill ${Math.round((skillsGap.currentSkills.soft.length / 10) * 100) >= 70 ? 'skill-progress-excellent' : Math.round((skillsGap.currentSkills.soft.length / 10) * 100) >= 50 ? 'skill-progress-good' : 'skill-progress-poor'}" 
                             style="width: ${Math.round((skillsGap.currentSkills.soft.length / 10) * 100)}%"></div>
                    </div>
                    <div class="skill-details">
                        <div class="current-skills">
                            <h4>Your Soft Skills</h4>
                            <ul class="skill-list">
                                ${skillsGap.currentSkills.soft.map(skill => `<li><i class="fas fa-check"></i> ${skill}</li>`).join('')}
                            </ul>
                        </div>
                        <div class="missing-skills">
                            <h4>Soft Skills to Develop</h4>
                            <ul class="skill-list">
                                ${['Strategic Thinking', 'Advanced Negotiation', 'Public Speaking', 'Emotional Intelligence', 'Change Management'].map(skill => `<li><i class="fas fa-plus"></i> ${skill}</li>`).join('')}
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="skill-category-card">
                    <div class="skill-category-header">
                        <h3 class="skill-category-title"><i class="fas fa-chart-line"></i> Leadership Skills</h3>
                        <span class="skill-match">${Math.round((skillsGap.currentSkills.leadership.length / 6) * 100)}% Match</span>
                    </div>
                    <div class="skill-progress-bar">
                        <div class="skill-progress-fill ${Math.round((skillsGap.currentSkills.leadership.length / 6) * 100) >= 70 ? 'skill-progress-excellent' : Math.round((skillsGap.currentSkills.leadership.length / 6) * 100) >= 50 ? 'skill-progress-good' : 'skill-progress-poor'}" 
                             style="width: ${Math.round((skillsGap.currentSkills.leadership.length / 6) * 100)}%"></div>
                    </div>
                    <div class="skill-details">
                        <div class="current-skills">
                            <h4>Your Leadership Skills</h4>
                            <ul class="skill-list">
                                ${skillsGap.currentSkills.leadership.map(skill => `<li><i class="fas fa-check"></i> ${skill}</li>`).join('')}
                            </ul>
                        </div>
                        <div class="missing-skills">
                            <h4>Leadership Skills to Develop</h4>
                            <ul class="skill-list">
                                ${skillsGap.skillGaps.filter(gap => gap.role === 'Management').slice(0, 5).map(gap => `<li><i class="fas fa-plus"></i> ${gap.skill}</li>`).join('')}
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="recommendations-card">
                    <h3><i class="fas fa-lightbulb"></i> Development Recommendations</h3>
                    ${skillsGap.developmentRecommendations.map(rec => `
                        <div class="recommendation-item">
                            <i class="fas fa-graduation-cap"></i>
                            <div>
                                <strong>${rec}</strong>
                                <p>Based on your skill gaps and target roles, this training would significantly improve your marketability.</p>
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;
        }

        // Event listeners
        document.getElementById('uploadArea').addEventListener('click', () => {
            document.getElementById('resumeFile').click();
        });

        document.getElementById('resumeFile').addEventListener('change', async (e) => {
            if (e.target.files.length > 0) {
                const file = e.target.files[0];
                const ext = file.name.split('.').pop().toLowerCase();
                if (ext === 'pdf') {
                    await extractTextFromPDF(file);
                } else if (ext === 'txt') {
                    const reader = new FileReader();
                    reader.onload = function(evt) {
                        extractedText = evt.target.result;
                        document.getElementById('resumeText').value = extractedText;
                    };
                    reader.readAsText(file);
                } else if (ext === 'docx') {
                    // DOCX parsing placeholder: requires external library (e.g., docx.js or mammoth.js)
                    alert('DOCX parsing is not yet implemented. Please use PDF or TXT for now.');
                } else {
                    alert('Unsupported file type. Please upload PDF, DOCX, or TXT.');
                }
            }
        });

        // PDF text extraction
        async function extractTextFromPDF(file) {
            const loading = document.getElementById('loading');
            loading.style.display = 'block';

            try {
                const arrayBuffer = await file.arrayBuffer();
                const pdf = await pdfjsLib.getDocument({ data: arrayBuffer }).promise;
                
                let fullText = '';
                for (let i = 1; i <= pdf.numPages; i++) {
                    const page = await pdf.getPage(i);
                    const textContent = await page.getTextContent();
                    const pageText = textContent.items.map(item => item.str).join(' ');
                    fullText += pageText + '\n';
                }
                
                extractedText = fullText;
                document.getElementById('resumeText').value = fullText.substring(0, 1000) + '...';
                
            } catch (error) {
                console.error('Error extracting PDF:', error);
                alert('Error reading PDF. Please try another file or use text input.');
            } finally {
                loading.style.display = 'none';
            }
        }

        // Main analysis function
        document.getElementById('analyzeBtn').addEventListener('click', async function() {
            const loading = document.getElementById('loading');
            const resultsContainer = document.getElementById('resultsContainer');
            let resumeText = extractedText || document.getElementById('resumeText').value.trim();
            const selectedLanguage = document.getElementById('languageSelect').value;
            const jobDescription = document.getElementById('jobDescInput').value.trim();
            const targetRole = document.getElementById('roleSelect').value;
            if (!resumeText || resumeText.length < 50) {
                alert('Please provide a resume with sufficient content (minimum 50 characters)');
                return;
            }
            loading.style.display = 'block';
            setTimeout(() => {
                try {
                    // Pass selectedLanguage, jobDescription, and targetRole to analysis logic (future: use for multi-language NLP, ATS customization, and role-specific analysis)
                    // Example: analyzer.analyzeResume(resumeText, selectedLanguage, jobDescription, targetRole);
                    currentAnalysis = analyzer.analyzeResume(resumeText);
                    displayResults(currentAnalysis);
                    updateAnalyticsDashboard();
                    displaySkillGapAnalysis(currentAnalysis);
                } catch (error) {
                    resultsContainer.innerHTML = `
                        <div class="insight-card critical" style="background: var(--error-bg, #2c1515); border: 1px solid var(--error-border, #dc2626); color: var(--error-text, #fee2e2);">
                            <h3 style="color: var(--error-heading, #ef4444);">❌ Analysis Error</h3>
                            <p style="color: var(--error-text, #fee2e2);">Unable to analyze the resume: ${error.message}</p>
                        </div>
                    `;
                } finally {
                    loading.style.display = 'none';
                }
            }, 2000);
        });

        // New Analysis button
        document.getElementById('newAnalysisBtn').addEventListener('click', function() {
            document.getElementById('resumeText').value = '';
            extractedText = '';
            document.getElementById('pdfFile').value = '';
            document.getElementById('resultsContainer').innerHTML = `
                <div class="score-card">
                    <h3>ATS Compatibility Score</h3>
                    <div class="progress-ring">
                        <svg viewBox="0 0 100 100">
                            <circle class="progress-bg" cx="50" cy="50" r="45"></circle>
                            <circle class="progress-fill" cx="50" cy="50" r="45" 
                                    stroke-dasharray="283" stroke-dashoffset="283"></circle>
                        </svg>
                        <div class="progress-text">
                            <span class="progress-value" id="atsScore">-</span>
                            <span class="progress-label">Score</span>
                        </div>
                    </div>
                    <p>How well your resume passes through Applicant Tracking Systems</p>
                </div>
                
                <div class="insight-card">
                    <p>Upload a resume or paste text to get detailed ATS analysis and comprehensive HR insights...</p>
                </div>
            `;
            
            // Reset analytics tabs
            document.querySelectorAll('.analytics-content').forEach(content => {
                content.innerHTML = '<p>Resume analysis required to view this data...</p>';
            });
            
            // Reset skill gap analysis
            document.getElementById('skillGapContainer').innerHTML = `
                <div class="insight-card">
                    <p>Upload and analyze a resume to view detailed skill gap analysis and improvement recommendations.</p>
                </div>
            `;
        });

        // Refresh Analytics button
        document.getElementById('refreshAnalytics').addEventListener('click', function() {
            initializeCharts();
            updateAnalyticsDashboard();
        });

        // Export Analytics button
        document.getElementById('exportAnalytics').addEventListener('click', function() {
            const dataStr = JSON.stringify(analyticsData, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = 'resumeiq-analytics.json';
            link.click();
            URL.revokeObjectURL(url);
        });

        // Export Report button
        document.getElementById('exportReportBtn').addEventListener('click', function() {
            alert('Export report functionality would be implemented here.');
        });

        // Export Skill Gap button
        document.getElementById('exportSkillGap').addEventListener('click', function() {
            alert('Skill gap report export functionality would be implemented here.');
        });

        // Generate Recommendations button
        document.getElementById('generateRecommendations').addEventListener('click', function() {
            if (!currentAnalysis) {
                alert('Please analyze a resume first to generate recommendations.');
                return;
            }
            alert('Additional personalized recommendations would be generated here.');
        });

        // Display results function
        function displayResults(analysis) {
            const container = document.getElementById('resultsContainer');
            const scoreClass = analysis.atsScore >= 80 ? 'score-excellent' : 
                             analysis.atsScore >= 60 ? 'score-good' : 'score-poor';

            // Update progress ring
            updateProgressRing(analysis.atsScore);
            
            container.innerHTML = `
                <div class="score-card">
                    <h3>ATS Compatibility Score</h3>
                    <div class="progress-ring">
                        <svg viewBox="0 0 100 100">
                            <circle class="progress-bg" cx="50" cy="50" r="45"></circle>
                            <circle class="progress-fill" cx="50" cy="50" r="45" 
                                    stroke-dasharray="283" stroke-dashoffset="283"></circle>
                        </svg>
                        <div class="progress-text">
                            <span class="progress-value ${scoreClass}">${analysis.atsScore}</span>
                            <span class="progress-label">Score</span>
                        </div>
                    </div>
                    <p>${analysis.atsScore >= 80 ? 'Excellent - High chance of passing ATS' : 
                         analysis.atsScore >= 60 ? 'Good - May pass ATS with some improvements' : 
                         'Poor - Needs significant improvements to pass ATS'}</p>
                </div>

                <div class="insight-card key-points">
                    <h3>🎯 Key Resume Highlights</h3>
                    ${analysis.keyPoints.map(point => `
                        <div style="margin: 12px 0; padding: 12px; background: rgba(52, 211, 153, 0.1); border-radius: 8px; border-left: 3px solid #34d399; color: var(--text-primary);">
                            <i class="fas fa-star" style="color: #34d399; margin-right: 8px;"></i> ${point}
                        </div>
                    `).join('')}
                </div>

                <div class="recruiter-checklist">
                    <h3><i class="fas fa-check-circle"></i> Recruiter Checklist</h3>
                    <p style="color: var(--text-secondary);">Essential elements recruiters look for:</p>
                    
                    ${analysis.recruiterChecklist.map(item => `
                        <div class="checklist-item ${item.checked ? 'checked' : ''}" style="color: var(--text-primary);">
                            <span class="check-icon">${item.checked ? '✅' : '❌'}</span>
                            <div>
                                <strong>${item.item}</strong>
                                <div style="font-size: 0.9em; color: var(--text-secondary);">${item.details}</div>
                            </div>
                        </div>
                    `).join('')}
                </div>

                <div class="metric-grid">
                    <div class="metric-card">
                        <div>Checklist Score</div>
                        <div class="metric-value">
                            ${analysis.recruiterChecklist.filter(item => item.checked).length}/${analysis.recruiterChecklist.length}
                        </div>
                        <div>Items Passed</div>
                    </div>
                    
                    <div class="metric-card">
                        <div>Industry Fit</div>
                        <div class="metric-value">${analysis.industryFit[0]?.score || 0}%</div>
                        <div>${analysis.industryFit[0]?.industry || 'N/A'}</div>
                    </div>
                    
                    <div class="metric-card">
                        <div>Key Points</div>
                        <div class="metric-value">${analysis.keyPoints.length}</div>
                        <div>Identified</div>
                    </div>
                </div>

                ${analysis.improvements.length > 0 ? `
                    <div class="insight-card warning">
                        <h3><i class="fas fa-exclamation-triangle"></i> Areas for Improvement</h3>
                        ${analysis.improvements.map(improvement => `
                            <div style="margin: 10px 0; padding: 10px; background: rgba(230, 126, 34, 0.08); border-radius: 8px;">
                                <i class="fas fa-lightbulb" style="color: #E67E22; margin-right: 8px;"></i> ${improvement}
                            </div>
                        `).join('')}
                    </div>
                ` : ''}

                <div class="insight-card">
                    <h3><i class="fas fa-file-alt"></i> Executive Summary</h3>
                    <pre style="white-space: pre-wrap; font-family: inherit; background: var(--darker); color: var(--text-primary); padding: 20px; border-radius: 12px; border-left: 4px solid var(--primary);">${analysis.summary}</pre>
                </div>
            `;

            // Update HR Analytics tabs
            updateHRAnalytics(analysis);
        }

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ResumeIQ Pro - Enhanced with Skill Gap Analysis');
            
            // Initialize with some default analytics data
            updateAnalyticsDashboard();
        });
    </script>
</body>
</html>
